
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chromebook Unlocked Games</title>
<link rel="icon" type="image/png" href="assets/logo.png">
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

:root {
  --base-font: clamp(12px, 1.2vw, 18px);
  --thumb-height: clamp(100px, 20vh, 160px);
  --sidebar-width: clamp(50px, 6vw, 70px);
}

* { box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #1c0033;
  font-family: 'Orbitron', sans-serif;
  color: #eee;
  overflow: hidden;
  font-size: var(--base-font);
}

/* Sidebar */
#sidebar {
  width: var(--sidebar-width);
  background: #330066;
  padding: 1rem 0;
  height: 100vh;
  overflow-y: auto;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  transition: width 0.3s ease;
}
#sidebar:hover { width: 250px; }
#sidebar header { display: flex; justify-content: center; margin-bottom: 2rem; }
#sidebar header img { height: 60px; width: auto; }
#sidebar ul { list-style: none; padding: 0; margin: 0; }
#sidebar li {
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 4px;
  transition: 0.3s ease;
  white-space: nowrap;
  opacity: 0;
  transform: translateY(5px);
}
#sidebar:hover li { opacity: 1; transform: translateY(0); }
#sidebar li:hover {
  background: #660099;
  box-shadow: 0 0 10px #ff99ff;
  color: #fff;
}

/* Content */
#content {
  padding: 1rem;
  overflow-y: auto;
  overflow-x: hidden;
  margin-left: var(--sidebar-width);
  width: calc(100% - var(--sidebar-width));
  transition: margin-left 0.3s;
  height: 100vh;
}

/* Controls */
#controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1280px;
  margin: 0 auto 0.5rem auto;
  padding: 0.5rem;
  visibility: hidden;
  font-size: 1.2em;
}
button {
  padding: 0.4rem 0.8rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1em;
}
#backBtn { background: #ff99ff; color: black; }
#fullscreenBtn { background: #cc66ff; color: black; }

/* Viewer */
.viewer {
  position: relative;
  display: none;
  justify-content: center;
  align-items: center;
  width: 100%;
  max-width: 1280px;
  margin: 0 auto 2rem auto;
  background: transparent;
  border-radius: 10px;
  overflow: hidden;
}
.viewer::before {
  content: "";
  display: block;
  padding-top: 56.25%;
}
.viewer iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
  background: transparent;
  object-fit: contain;
}

/* Overlay for Play */
#startOverlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, #330066 0%, #1c0033 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  z-index: 10;
  transition: opacity 0.5s ease;
}
#startOverlay img {
  width: clamp(200px, 40vw, 300px);
  max-width: 80%;
  border-radius: 10px;
  box-shadow: 0 0 20px #ff99ff;
}
#startOverlay h1 {
  margin: 0;
  font-size: clamp(1.5rem, 2.5vw, 3rem);
  color: #fff;
}
#startButton {
  padding: 0.8rem 2rem;
  font-size: clamp(1rem, 1.5vw, 1.5rem);
  background: #ff99ff;
  color: black;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
}
#startButton:hover {
  background: #ff66ff;
  box-shadow: 0 0 15px #ff66ff;
}

/* Game Grid */
.category { margin-top: 2rem; }
.category h2 {
  color: #ffccff;
  margin-bottom: 0.5rem;
  cursor: pointer;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(clamp(140px, 18vw, 220px), 1fr));
  gap: 1rem;
  justify-content: center;
}
.card {
  background: #4d0066;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: transform .2s;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.card:hover { transform: scale(1.05); background: #660099; }
.thumb {
  width: 100%;
  height: var(--thumb-height);
  object-fit: cover;
  margin-bottom: 0.5rem;
  border-radius: 6px;
  background: #330033;
}
.card.more {
  background: rgba(255,255,255,0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2rem;
  color: #ffccff;
}

/* DMCA */
#dmcaLink {
  position: fixed;
  bottom: 10px;
  right: 10px;
  background: #ff66ff;
  color: black;
  padding: 0.3rem 0.6rem;
  border-radius: 6px;
  font-size: 0.8rem;
  text-decoration: none;
  z-index: 10000;
  transition: 0.2s;
}
#dmcaLink:hover { background: #ff99ff; color: black; }
</style>
</head>
<body>
<a href="dmca.html" id="dmcaLink" target="_blank">DMCA</a>

<!-- Sidebar -->
<div id="sidebar">
  <header><img src="assets/logo.png" alt="Logo"></header>
  <ul id="categoryList">
    <li onclick="filterCategory('Home')">Home</li>
    <li onclick="filterCategory('Shooter')">Shooter</li><li onclick="filterCategory('Uncategorized')">Uncategorized</li><li onclick="filterCategory('Horror')">Horror</li><li onclick="filterCategory('Clickers')">Clickers</li>
  </ul>
</div>

<!-- Content -->
<div id="content">
  <div id="controls">
    <button id="backBtn" onclick="closeGame()">← Back</button>
    <span id="gameTitle"></span>
    <button id="fullscreenBtn" onclick="toggleFullscreen()">⛶ Fullscreen</button>
    <button id="recentBackBtn" onclick="backToHome()" style="display:none;">← Home</button>
  </div>

  <div class="viewer" id="viewer">
    <div id="startOverlay">
      <img id="startThumb" src="" alt="Game Thumbnail">
      <h1 id="startName"></h1>
      <button id="startButton" onclick="startGame()">▶ Play</button>
    </div>
    <iframe id="gameFrame" src=""></iframe>
  </div>

  <!-- Recently Played -->
  <div class="category" data-category="Recently Played" id="recentlyPlayedSection" style="display:none;">
    <h2>Recently Played</h2>
    <div class="grid" id="recentlyPlayedGrid"></div>
  </div>

  <!-- All Games (Home) -->
  <div class="category" data-category="Home">
    <h2>All Games</h2>
    <div class="grid">
      
    <div class="card" onclick="prepareGame('1v1.lol','1v1.lol','games/1v1.lol/thumbnail.png')">
      <img class="thumb" src="games/1v1.lol/thumbnail.png" alt="1v1.lol">
      <div>1v1.lol</div>
    </div>
    <div class="card" onclick="prepareGame('Age%20Of%20War','Age%20Of%20War','games/Age Of War/thumbnail.png')">
      <img class="thumb" src="games/Age Of War/thumbnail.png" alt="Age Of War">
      <div>Age Of War</div>
    </div>
    <div class="card" onclick="prepareGame('BTD5','BTD5','games/BTD5/thumbnail.jpg')">
      <img class="thumb" src="games/BTD5/thumbnail.jpg" alt="BTD5">
      <div>BTD5</div>
    </div>
    <div class="card" onclick="prepareGame('Backrooms%202D','Backrooms%202D','games/Backrooms 2D/thumbnail.jpg')">
      <img class="thumb" src="games/Backrooms 2D/thumbnail.jpg" alt="Backrooms 2D">
      <div>Backrooms 2D</div>
    </div>
    <div class="card" onclick="prepareGame('Bad%20Parenting','Bad%20Parenting','games/Bad Parenting/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Parenting/thumbnail.jpg" alt="Bad Parenting">
      <div>Bad Parenting</div>
    </div>
    <div class="card" onclick="prepareGame('Bad%20Piggies','Bad%20Piggies','games/Bad Piggies/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Piggies/thumbnail.jpg" alt="Bad Piggies">
      <div>Bad Piggies</div>
    </div>
    <div class="card" onclick="prepareGame('Bad%20Time%20Simulator','Bad%20Time%20Simulator','games/Bad Time Simulator/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Time Simulator/thumbnail.jpg" alt="Bad Time Simulator">
      <div>Bad Time Simulator</div>
    </div>
    <div class="card" onclick="prepareGame('Baldi%E2%80%99s%20Basics','Baldi%E2%80%99s%20Basics','games/Baldi’s Basics/thumbnail.png')">
      <img class="thumb" src="games/Baldi’s Basics/thumbnail.png" alt="Baldi’s Basics">
      <div>Baldi’s Basics</div>
    </div>
    <div class="card" onclick="prepareGame('Bit%20Planes','Bit%20Planes','games/Bit Planes/thumbnail.jpg')">
      <img class="thumb" src="games/Bit Planes/thumbnail.jpg" alt="Bit Planes">
      <div>Bit Planes</div>
    </div>
    <div class="card" onclick="prepareGame('Blackjack','Blackjack','games/Blackjack/thumbnail.png')">
      <img class="thumb" src="games/Blackjack/thumbnail.png" alt="Blackjack">
      <div>Blackjack</div>
    </div>
    <div class="card" onclick="prepareGame('Block%20Blast','Block%20Blast','games/Block Blast/thumbnail.jpg')">
      <img class="thumb" src="games/Block Blast/thumbnail.jpg" alt="Block Blast">
      <div>Block Blast</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber%202','Bob%20The%20Robber%202','games/Bob The Robber 2/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber 2/thumbnail.jpg" alt="Bob The Robber 2">
      <div>Bob The Robber 2</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber%205','Bob%20The%20Robber%205','games/Bob The Robber 5/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber 5/thumbnail.jpg" alt="Bob The Robber 5">
      <div>Bob The Robber 5</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber','Bob%20The%20Robber','games/Bob The Robber/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber/thumbnail.jpg" alt="Bob The Robber">
      <div>Bob The Robber</div>
    </div>
    <div class="card" onclick="prepareGame('Bouncemasters','Bouncemasters','games/Bouncemasters/thumbnail.jpg')">
      <img class="thumb" src="games/Bouncemasters/thumbnail.jpg" alt="Bouncemasters">
      <div>Bouncemasters</div>
    </div>
    <div class="card" onclick="prepareGame('Bouncy%20Motors','Bouncy%20Motors','games/Bouncy Motors/thumbnail.jpg')">
      <img class="thumb" src="games/Bouncy Motors/thumbnail.jpg" alt="Bouncy Motors">
      <div>Bouncy Motors</div>
    </div>
    <div class="card" onclick="prepareGame('Burrito%20Bison%20Launcha%20Libre','Burrito%20Bison%20Launcha%20Libre','games/Burrito Bison Launcha Libre/thumbnail.jpg')">
      <img class="thumb" src="games/Burrito Bison Launcha Libre/thumbnail.jpg" alt="Burrito Bison Launcha Libre">
      <div>Burrito Bison Launcha Libre</div>
    </div>
    <div class="card" onclick="prepareGame('Capybara%20Clicker','Capybara%20Clicker','games/Capybara Clicker/thumbnail.png')">
      <img class="thumb" src="games/Capybara Clicker/thumbnail.png" alt="Capybara Clicker">
      <div>Capybara Clicker</div>
    </div>
    <div class="card" onclick="prepareGame('Chesire%20in%20a%20Chatroom','Chesire%20in%20a%20Chatroom','games/Chesire in a Chatroom/thumbnail.jpg')">
      <img class="thumb" src="games/Chesire in a Chatroom/thumbnail.jpg" alt="Chesire in a Chatroom">
      <div>Chesire in a Chatroom</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%202','Clear%20Vision%202','games/Clear Vision 2/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision 2/thumbnail.jpg" alt="Clear Vision 2">
      <div>Clear Vision 2</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%203','Clear%20Vision%203','games/Clear Vision 3/thumbnail.png')">
      <img class="thumb" src="games/Clear Vision 3/thumbnail.png" alt="Clear Vision 3">
      <div>Clear Vision 3</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%204','Clear%20Vision%204','games/Clear Vision 4/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision 4/thumbnail.jpg" alt="Clear Vision 4">
      <div>Clear Vision 4</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%205','Clear%20Vision%205','games/Clear Vision 5/thumbnail.png')">
      <img class="thumb" src="games/Clear Vision 5/thumbnail.png" alt="Clear Vision 5">
      <div>Clear Vision 5</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision','Clear%20Vision','games/Clear Vision/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision/thumbnail.jpg" alt="Clear Vision">
      <div>Clear Vision</div>
    </div>
    <div class="card" onclick="prepareGame('Coffie%20Maker','Coffie%20Maker','games/Coffie Maker/thumbnail.png')">
      <img class="thumb" src="games/Coffie Maker/thumbnail.png" alt="Coffie Maker">
      <div>Coffie Maker</div>
    </div>
    <div class="card" onclick="prepareGame('Color%20Brust%203D','Color%20Brust%203D','games/Color Brust 3D/thumbnail.jpg')">
      <img class="thumb" src="games/Color Brust 3D/thumbnail.jpg" alt="Color Brust 3D">
      <div>Color Brust 3D</div>
    </div>
    <div class="card" onclick="prepareGame('Color%20Match','Color%20Match','games/Color Match/thumbnail.jpg')">
      <img class="thumb" src="games/Color Match/thumbnail.jpg" alt="Color Match">
      <div>Color Match</div>
    </div>
    <div class="card" onclick="prepareGame('Cookie%20Clicker','Cookie%20Clicker','games/Cookie Clicker/thumbnail.png')">
      <img class="thumb" src="games/Cookie Clicker/thumbnail.png" alt="Cookie Clicker">
      <div>Cookie Clicker</div>
    </div>
    <div class="card" onclick="prepareGame('Crank%20It!','Crank%20It!','games/Crank It!/thumbnail.jpg')">
      <img class="thumb" src="games/Crank It!/thumbnail.jpg" alt="Crank It!">
      <div>Crank It!</div>
    </div>
    <div class="card" onclick="prepareGame('Crazy%20Motorcycle','Crazy%20Motorcycle','games/Crazy Motorcycle/thumbnail.jpg')">
      <img class="thumb" src="games/Crazy Motorcycle/thumbnail.jpg" alt="Crazy Motorcycle">
      <div>Crazy Motorcycle</div>
    </div>
    <div class="card" onclick="prepareGame('The%20Binding%20of%20Isaac%20-%20Wrath%20of%20the%20Lamb','The%20Binding%20of%20Isaac%20-%20Wrath%20of%20the%20Lamb','games/The Binding of Isaac - Wrath of the Lamb/thumbnail.jpg')">
      <img class="thumb" src="games/The Binding of Isaac - Wrath of the Lamb/thumbnail.jpg" alt="The Binding of Isaac - Wrath of the Lamb">
      <div>The Binding of Isaac - Wrath of the Lamb</div>
    </div>
    </div>
  </div>

  <!-- Other Categories -->
  
    <div class="category" data-category="Shooter" style="display:none;">
      <h2>Shooter</h2>
      <div class="grid">
        
    <div class="card" onclick="prepareGame('1v1.lol','1v1.lol','games/1v1.lol/thumbnail.png')">
      <img class="thumb" src="games/1v1.lol/thumbnail.png" alt="1v1.lol">
      <div>1v1.lol</div>
    </div>
      </div>
    </div>
    <div class="category" data-category="Uncategorized" style="display:none;">
      <h2>Uncategorized</h2>
      <div class="grid">
        
    <div class="card" onclick="prepareGame('Age%20Of%20War','Age%20Of%20War','games/Age Of War/thumbnail.png')">
      <img class="thumb" src="games/Age Of War/thumbnail.png" alt="Age Of War">
      <div>Age Of War</div>
    </div>
    <div class="card" onclick="prepareGame('BTD5','BTD5','games/BTD5/thumbnail.jpg')">
      <img class="thumb" src="games/BTD5/thumbnail.jpg" alt="BTD5">
      <div>BTD5</div>
    </div>
    <div class="card" onclick="prepareGame('Backrooms%202D','Backrooms%202D','games/Backrooms 2D/thumbnail.jpg')">
      <img class="thumb" src="games/Backrooms 2D/thumbnail.jpg" alt="Backrooms 2D">
      <div>Backrooms 2D</div>
    </div>
    <div class="card" onclick="prepareGame('Bad%20Piggies','Bad%20Piggies','games/Bad Piggies/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Piggies/thumbnail.jpg" alt="Bad Piggies">
      <div>Bad Piggies</div>
    </div>
    <div class="card" onclick="prepareGame('Bad%20Time%20Simulator','Bad%20Time%20Simulator','games/Bad Time Simulator/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Time Simulator/thumbnail.jpg" alt="Bad Time Simulator">
      <div>Bad Time Simulator</div>
    </div>
    <div class="card" onclick="prepareGame('Baldi%E2%80%99s%20Basics','Baldi%E2%80%99s%20Basics','games/Baldi’s Basics/thumbnail.png')">
      <img class="thumb" src="games/Baldi’s Basics/thumbnail.png" alt="Baldi’s Basics">
      <div>Baldi’s Basics</div>
    </div>
    <div class="card" onclick="prepareGame('Bit%20Planes','Bit%20Planes','games/Bit Planes/thumbnail.jpg')">
      <img class="thumb" src="games/Bit Planes/thumbnail.jpg" alt="Bit Planes">
      <div>Bit Planes</div>
    </div>
    <div class="card" onclick="prepareGame('Blackjack','Blackjack','games/Blackjack/thumbnail.png')">
      <img class="thumb" src="games/Blackjack/thumbnail.png" alt="Blackjack">
      <div>Blackjack</div>
    </div>
    <div class="card" onclick="prepareGame('Block%20Blast','Block%20Blast','games/Block Blast/thumbnail.jpg')">
      <img class="thumb" src="games/Block Blast/thumbnail.jpg" alt="Block Blast">
      <div>Block Blast</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber%202','Bob%20The%20Robber%202','games/Bob The Robber 2/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber 2/thumbnail.jpg" alt="Bob The Robber 2">
      <div>Bob The Robber 2</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber%205','Bob%20The%20Robber%205','games/Bob The Robber 5/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber 5/thumbnail.jpg" alt="Bob The Robber 5">
      <div>Bob The Robber 5</div>
    </div>
    <div class="card" onclick="prepareGame('Bob%20The%20Robber','Bob%20The%20Robber','games/Bob The Robber/thumbnail.jpg')">
      <img class="thumb" src="games/Bob The Robber/thumbnail.jpg" alt="Bob The Robber">
      <div>Bob The Robber</div>
    </div>
    <div class="card" onclick="prepareGame('Bouncemasters','Bouncemasters','games/Bouncemasters/thumbnail.jpg')">
      <img class="thumb" src="games/Bouncemasters/thumbnail.jpg" alt="Bouncemasters">
      <div>Bouncemasters</div>
    </div>
    <div class="card" onclick="prepareGame('Bouncy%20Motors','Bouncy%20Motors','games/Bouncy Motors/thumbnail.jpg')">
      <img class="thumb" src="games/Bouncy Motors/thumbnail.jpg" alt="Bouncy Motors">
      <div>Bouncy Motors</div>
    </div>
    <div class="card" onclick="prepareGame('Burrito%20Bison%20Launcha%20Libre','Burrito%20Bison%20Launcha%20Libre','games/Burrito Bison Launcha Libre/thumbnail.jpg')">
      <img class="thumb" src="games/Burrito Bison Launcha Libre/thumbnail.jpg" alt="Burrito Bison Launcha Libre">
      <div>Burrito Bison Launcha Libre</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%202','Clear%20Vision%202','games/Clear Vision 2/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision 2/thumbnail.jpg" alt="Clear Vision 2">
      <div>Clear Vision 2</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%203','Clear%20Vision%203','games/Clear Vision 3/thumbnail.png')">
      <img class="thumb" src="games/Clear Vision 3/thumbnail.png" alt="Clear Vision 3">
      <div>Clear Vision 3</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%204','Clear%20Vision%204','games/Clear Vision 4/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision 4/thumbnail.jpg" alt="Clear Vision 4">
      <div>Clear Vision 4</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision%205','Clear%20Vision%205','games/Clear Vision 5/thumbnail.png')">
      <img class="thumb" src="games/Clear Vision 5/thumbnail.png" alt="Clear Vision 5">
      <div>Clear Vision 5</div>
    </div>
    <div class="card" onclick="prepareGame('Clear%20Vision','Clear%20Vision','games/Clear Vision/thumbnail.jpg')">
      <img class="thumb" src="games/Clear Vision/thumbnail.jpg" alt="Clear Vision">
      <div>Clear Vision</div>
    </div>
    <div class="card" onclick="prepareGame('Coffie%20Maker','Coffie%20Maker','games/Coffie Maker/thumbnail.png')">
      <img class="thumb" src="games/Coffie Maker/thumbnail.png" alt="Coffie Maker">
      <div>Coffie Maker</div>
    </div>
    <div class="card" onclick="prepareGame('Color%20Brust%203D','Color%20Brust%203D','games/Color Brust 3D/thumbnail.jpg')">
      <img class="thumb" src="games/Color Brust 3D/thumbnail.jpg" alt="Color Brust 3D">
      <div>Color Brust 3D</div>
    </div>
    <div class="card" onclick="prepareGame('Color%20Match','Color%20Match','games/Color Match/thumbnail.jpg')">
      <img class="thumb" src="games/Color Match/thumbnail.jpg" alt="Color Match">
      <div>Color Match</div>
    </div>
    <div class="card" onclick="prepareGame('Crazy%20Motorcycle','Crazy%20Motorcycle','games/Crazy Motorcycle/thumbnail.jpg')">
      <img class="thumb" src="games/Crazy Motorcycle/thumbnail.jpg" alt="Crazy Motorcycle">
      <div>Crazy Motorcycle</div>
    </div>
    <div class="card" onclick="prepareGame('The%20Binding%20of%20Isaac%20-%20Wrath%20of%20the%20Lamb','The%20Binding%20of%20Isaac%20-%20Wrath%20of%20the%20Lamb','games/The Binding of Isaac - Wrath of the Lamb/thumbnail.jpg')">
      <img class="thumb" src="games/The Binding of Isaac - Wrath of the Lamb/thumbnail.jpg" alt="The Binding of Isaac - Wrath of the Lamb">
      <div>The Binding of Isaac - Wrath of the Lamb</div>
    </div>
      </div>
    </div>
    <div class="category" data-category="Horror" style="display:none;">
      <h2>Horror</h2>
      <div class="grid">
        
    <div class="card" onclick="prepareGame('Bad%20Parenting','Bad%20Parenting','games/Bad Parenting/thumbnail.jpg')">
      <img class="thumb" src="games/Bad Parenting/thumbnail.jpg" alt="Bad Parenting">
      <div>Bad Parenting</div>
    </div>
    <div class="card" onclick="prepareGame('Chesire%20in%20a%20Chatroom','Chesire%20in%20a%20Chatroom','games/Chesire in a Chatroom/thumbnail.jpg')">
      <img class="thumb" src="games/Chesire in a Chatroom/thumbnail.jpg" alt="Chesire in a Chatroom">
      <div>Chesire in a Chatroom</div>
    </div>
    <div class="card" onclick="prepareGame('Crank%20It!','Crank%20It!','games/Crank It!/thumbnail.jpg')">
      <img class="thumb" src="games/Crank It!/thumbnail.jpg" alt="Crank It!">
      <div>Crank It!</div>
    </div>
      </div>
    </div>
    <div class="category" data-category="Clickers" style="display:none;">
      <h2>Clickers</h2>
      <div class="grid">
        
    <div class="card" onclick="prepareGame('Capybara%20Clicker','Capybara%20Clicker','games/Capybara Clicker/thumbnail.png')">
      <img class="thumb" src="games/Capybara Clicker/thumbnail.png" alt="Capybara Clicker">
      <div>Capybara Clicker</div>
    </div>
    <div class="card" onclick="prepareGame('Cookie%20Clicker','Cookie%20Clicker','games/Cookie Clicker/thumbnail.png')">
      <img class="thumb" src="games/Cookie Clicker/thumbnail.png" alt="Cookie Clicker">
      <div>Cookie Clicker</div>
    </div>
      </div>
    </div>

</div>

<script>
const viewer = document.getElementById('viewer');
const frame = document.getElementById('gameFrame');
const controls = document.getElementById('controls');
const gameTitle = document.getElementById('gameTitle');
const startOverlay = document.getElementById('startOverlay');
const startThumb = document.getElementById('startThumb');
const startName = document.getElementById('startName');
const recentlyPlayedGrid = document.getElementById('recentlyPlayedGrid');
let currentGameFolder = null;
const MAX_RECENT = 25;

// Utility to check if game exists
function gameExists(folder) {
  try {
    const xhr = new XMLHttpRequest();
    xhr.open('HEAD', 'games/' + folder + '/index.html', false);
    xhr.send();
    return xhr.status !== 404;
  } catch { return false; }
}

// Load Recently Played, removing missing games
function loadRecentlyPlayed() {
  let list = JSON.parse(localStorage.getItem('recentlyPlayed') || '[]');
  list = list.filter(g => gameExists(g.folder));
  localStorage.setItem('recentlyPlayed', JSON.stringify(list));
  updateRecentlyPlayedUI(list, true);
}

// Save game to Recently Played
function saveRecentlyPlayed(game) {
  let list = JSON.parse(localStorage.getItem('recentlyPlayed') || '[]');
  list = list.filter(g => g.folder !== game.folder);
  list.unshift(game);
  if (list.length > MAX_RECENT) list = list.slice(0, MAX_RECENT);
  list = list.filter(g => gameExists(g.folder));
  localStorage.setItem('recentlyPlayed', JSON.stringify(list));
  updateRecentlyPlayedUI(list, true);
}

// Update Recently Played UI
function updateRecentlyPlayedUI(list, homeView = false) {
  recentlyPlayedGrid.innerHTML = '';
  if (!list.length) {
    document.getElementById('recentlyPlayedSection').style.display = 'none';
    return;
  }
  document.getElementById('recentlyPlayedSection').style.display = 'block';

  const displayList = homeView ? list.slice(0,7) : list;
  displayList.forEach(g => {
    const card = document.createElement('div');
    card.className = 'card';
    card.onclick = () => prepareGame(encodeURIComponent(g.folder), encodeURIComponent(g.name), g.thumb);
    card.innerHTML = `<img class="thumb" src="${g.thumb}" alt="${g.name}"><div>${g.name}</div>`;
    recentlyPlayedGrid.appendChild(card);
  });

  // Transparent ⋯ box only in home view and only as last item
  if (homeView && list.length > 7) {
    const moreCard = document.createElement('div');
    moreCard.className = 'card more';
    moreCard.textContent = '⋯';
    moreCard.onclick = () => filterCategory('Recently Played');
    recentlyPlayedGrid.appendChild(moreCard);
  }
}

// Game functions
function prepareGame(folderEncoded, nameEncoded, thumbSrc) {
  const folder = decodeURIComponent(folderEncoded);
  const name = decodeURIComponent(nameEncoded);
  currentGameFolder = folder;
  frame.src = '';
  viewer.style.display = 'flex';
  controls.style.visibility = 'visible';
  gameTitle.textContent = name;
  startThumb.src = thumbSrc;
  startName.textContent = name;
  startOverlay.style.opacity = '1';
  startOverlay.style.pointerEvents = 'auto';
  window.location.hash = '#/game/' + folderEncoded;
  document.getElementById('content').scrollTop = 0;
  saveRecentlyPlayed({ folder, name, thumb: thumbSrc });
}

function startGame() {
  if (!currentGameFolder) return;
  frame.src = 'games/' + currentGameFolder + '/index.html';
  startOverlay.style.opacity = '0';
  startOverlay.style.pointerEvents = 'none';
}

function closeGame() {
  frame.src = '';
  viewer.style.display = 'none';
  controls.style.visibility = 'hidden';
  gameTitle.textContent = '';
  currentGameFolder = null;
  startOverlay.style.opacity = '1';
  startOverlay.style.pointerEvents = 'auto';
  window.location.hash = '';
}

function toggleFullscreen() {
  if (!document.fullscreenElement) frame.requestFullscreen().catch(()=>{});
  else document.exitFullscreen();
}

// Filter categories
function filterCategory(cat) {
  const all = document.querySelectorAll('.category');
  all.forEach(c => {
    const category = c.getAttribute('data-category');
    if (cat === 'Home') {
      c.style.display = (category === 'Home' || category === 'Recently Played') ? 'block' : 'none';
      updateRecentlyPlayedUI(JSON.parse(localStorage.getItem('recentlyPlayed') || '[]'), true);
      document.getElementById('recentBackBtn').style.display = 'none';
    } else if (cat === 'Recently Played') {
      c.style.display = 'block';
      updateRecentlyPlayedUI(JSON.parse(localStorage.getItem('recentlyPlayed') || '[]'), false);
      document.getElementById('recentBackBtn').style.display = 'inline-block';
    } else {
      c.style.display = category === cat ? 'block' : 'none';
      document.getElementById('recentBackBtn').style.display = 'none';
    }
  });
  document.getElementById('content').scrollTop = 0;
}

// Back to home from Recently Played
function backToHome() {
  filterCategory('Home');
}

// Hash routing for direct game or Recently Played
function handleRouting() {
  const hash = window.location.hash;
  if (hash.startsWith('#/game/')) {
    const folder = decodeURIComponent(hash.replace('#/game/', ''));
    const card = [...document.querySelectorAll('.card')]
      .find(el => el.getAttribute('onclick')?.includes(encodeURIComponent(folder)));
    if (card) {
      const name = card.querySelector('div').innerText;
      const thumb = card.querySelector('img').src;
      prepareGame(encodeURIComponent(folder), encodeURIComponent(name), thumb);
    }
  } else if (hash === '#/recent') {
    filterCategory('Recently Played');
  } else {
    closeGame();
    filterCategory('Home');
  }
}

filterCategory('Home');
loadRecentlyPlayed();
window.addEventListener('hashchange', handleRouting);
window.addEventListener('load', handleRouting);

// Prevent arrow keys / space scrolling
window.addEventListener('keydown', e => {
  const blocked = [' ', 'ArrowUp','ArrowDown','ArrowLeft','ArrowRight'];
  if (blocked.includes(e.key)) e.preventDefault();
});
</script>
</body>
</html>
